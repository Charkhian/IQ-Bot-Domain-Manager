

<div>
<h3 class="sub-header">IQ Bot Connection Settings</h3> 

<div class="form-group">
  <label for="usr">IQ Bot Login:</label>
  <input type="text" class="form-control" id="iqbotlogin">
</div>
<div class="form-group">
  <label for="pwd">IQ Bot Password:</label>
  <input type="password" class="form-control" id="iqbotpassword">
</div>
<div class="form-group">
  <label for="pwd">IQ Bot URL (with Port):</label>
  <input type="text" class="col-lg-3 form-control" id="iqboturl">
</div>


<div class="form-group">
  <label for="pwd">IQ Bot Version:</label>
   <button  id="dropdown_title"  class="btn dropdown-toggle" data-toggle="dropdown">Pick Version<span class="caret"></span></button>
                <ul ID="testid" class="dropdown-menu">
                  <li><a href="#">5</a></li>
                  <li><a href="#">6</a></li>
                </ul>
</div>

<div class="form-group">
<label for="pwd"></label>
	<button id="savebutton" type="button" class="btn btn-info">Save</button>
	<button id="testbutton" type="button" class="btn btn-info">Test</button>
</div>

</div>

<script>

setSocketListeners();

$(this).ready(function(){

	//$('.dropdown-toggle').dropdown();

	$('#savebutton').on('click', function() {
		console.log("save button was clicked");
	    //TO DO - Save info to backend JSON file
	    
	});

	$('#testid li').on('click', function() {
	    $('#dropdown_title').html($(this).find('a').html());
	});

	$('#savebutton').on('click', function() {
	    socket.emit('save_structure',
	    	{
  				"url": $('#iqboturl').val(),
  				"major_version": $('#dropdown_title').text(),
  				"login": $('#iqbotlogin').val(),
  				"password": $('#iqbotpassword').val()
			}
		);
	});

	$('#testbutton').on('click', function() {
		socket.emit('test_iqbot_connection',
	    	{}
		);
	});


	socket.emit('get_structure',{});
	console.log("Loaded!");


	});

function setSocketListeners(){

	// On receiving the content of the JSON file, we update all labels
	socket.on('structure_sent',function(result){

		$('#iqbotlogin').val(result["login"]);
		$('#iqbotpassword').val(result["password"]);
		$('#iqboturl').val(result["url"]);

		//$('#iqbotlogin').text(result["login"]);

	});
};

</script>

